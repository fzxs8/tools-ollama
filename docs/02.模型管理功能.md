# 模型管理功能

## 功能概述

模型管理功能是 Ollama 模型管理工具的核心功能之一，允许用户查看、运行、停止和删除本地和远程服务器上的大语言模型。

## 功能详情

### 1. 模型列表展示

用户可以在界面中查看当前选中服务器上的所有模型，包括以下信息：
- 模型名称
- 模型大小
- 修改时间
- 运行状态（运行中/未运行）

### 2. 模型运行状态管理

#### 运行模型
- 用户可以选择一个未运行的模型并启动它
- 启动时可以配置模型参数（温度、top_p、上下文大小等）
- 成功启动后，模型状态会更新为"运行中"

#### 停止模型
- 用户可以停止正在运行的模型
- 停止后，模型状态会更新为"未运行"

### 3. 模型操作

#### 查看模型详情
- 用户可以查看模型的详细信息
- 可以配置和调整模型参数
- 可以保存模型参数配置

#### 测试模型
- 用户可以发送测试消息给模型
- 查看模型的响应结果

#### 删除模型
- 用户可以从服务器上删除不需要的模型
- 删除前会显示确认对话框

### 4. 多服务器支持

- 支持在本地和多个远程 Ollama 服务器之间切换
- 每个服务器的模型列表独立管理
- 模型操作仅针对当前选中的服务器

## 界面设计

### 主要组件

1. **服务器选择器**：
   - 下拉菜单选择当前操作的服务器
   - 支持本地服务和远程服务

2. **模型列表**：
   - 表格形式展示模型信息
   - 包含序号、模型名称、大小、修改时间、运行状态等列
   - 每行包含操作按钮

3. **模型详情抽屉**：
   - 点击"查看"按钮打开
   - 展示模型详细信息
   - 提供运行/停止、测试、删除等操作按钮
   - 提供模型参数配置表单

## API 接口

### 后端接口

1. `ListModelsByServer(serverID string) ([]Model, error)`：
   - 根据服务器 ID 获取模型列表

2. `RunModel(modelName string, params map[string]interface{}) error`：
   - 运行指定模型

3. `StopModel(modelName string) error`：
   - 停止指定模型

4. `DeleteModel(modelName string) error`：
   - 删除指定模型

5. `TestModel(modelName string) (string, error)`：
   - 测试指定模型

6. `GetModelParams(modelName string) (map[string]interface{}, error)`：
   - 获取模型参数

7. `SetModelParams(modelName string, params map[string]interface{}) error`：
   - 设置模型参数

## 状态管理

### 运行状态维护

- 模型运行状态在内存中维护
- 应用重启后状态会重置
- 状态在列表和详情抽屉中保持同步

### 错误处理

- 所有操作都有完善的错误处理机制
- 失败操作会显示错误消息给用户
- 即使 API 调用失败，也要确保界面状态一致性