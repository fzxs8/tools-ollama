# 3. 数据结构

为了在 Go 代码中清晰地表示 API 格式、配置和状态，我们需要定义一系列的 `struct`。

## 3.1. OpenAI API 兼容结构

这部分结构用于实现对 OpenAI API 的兼容，定义了请求、响应和错误格式。

(此处省略与之前相同的 API 兼容结构定义...)

## 3.2. 配置与状态管理结构

这部分结构用于前端页面的配置管理和状态同步。

### 3.2.1. 配置结构

此结构用于持久化存储用户在设置页面的配置。

```go
// OpenAIAdapterConfig holds the user-configurable settings for the adapter.
// Default port is 11223.
type OpenAIAdapterConfig struct {
	ListenIP             string `json:"listenIp"`
	ListenPort           int    `json:"listenPort"`
	TargetOllamaServerID string `json:"targetOllamaServerId"`
}
```

### 3.2.2. 状态结构

此结构用于向前端实时同步服务的当前状态。

```go
// OpenAIAdapterStatus represents the current runtime status of the adapter service.
type OpenAIAdapterStatus struct {
	IsRunning bool   `json:"isRunning"`
	Error     string `json:"error,omitempty"` // Holds error message if startup failed
}
```

### 3.2.3. 日志结构

此结构用于后端向前端发送单条日志记录。

```go
// LogEntry represents a single log message sent to the frontend.
type LogEntry struct {
    Timestamp time.Time `json:"timestamp"`
    Level     string    `json:"level"` // e.g., "INFO", "ERROR", "DEBUG"
    Message   string    `json:"message"`
}
```
