# PromptPilot模块

## 概述
PromptPilot是一个专门用于提示词工程的模块，帮助用户创建、优化和管理提示词。该模块提供直观的界面让用户能够快速生成初始提示词，对其进行调优，并支持多模型对比测试，以找到最佳的提示词配置。

## 主要功能
1. **提示词生成**：
   - 用户输入想法，系统基于选定模型和服务流式生成初始Prompt
   - 支持实时展示生成过程

2. **提示词调优**：
   - 提供快速优化功能
   - 支持基于用户反馈的迭代优化

3. **提示词管理**：
   - 保存和管理用户自定义提示词
   - 提供测试预览、编辑保存和删除功能
   - 支持标签分类管理

4. **多模型对比测试**：
   - 支持同时使用3个模型进行对比测试
   - 直观展示不同模型的输出效果

5. **服务和模型管理**：
   - 支持选择已配置的Ollama服务
   - 动态加载选中服务中的模型列表

## 文档列表
- [功能需求](01.功能需求.md) - 详细描述模块功能需求
- [界面设计](02.界面设计.md) - 界面布局和组件设计
- [数据结构](03.数据结构.md) - 前后端数据结构定义
- [API接口](04.API接口.md) - 接口规范和调用方式
- [待办事项](06.待办事项.md) - 功能规划和改进计划

## 技术实现
- 前端：Vue3 + TypeScript + Element Plus
- 后端：Go + Wails框架
- 存储：duolasdk存储功能
- 通信：通过Wails桥接前后端交互

## 架构设计

### 前端架构
前端采用组件化设计，主要包含以下组件：

1. **主容器组件**：PromptPilot.vue
   - 负责整体状态管理
   - 协调各子组件间通信
   - 处理核心业务逻辑

2. **服务选择组件**：ServerSelector.vue
   - 提供已配置服务选择功能
   - 支持动态加载模型列表

3. **模型选择组件**：ModelSelector.vue
   - 提供模型和服务选择功能
   - 支持多模型选择

4. **想法输入组件**：IdeaInput.vue
   - 处理用户想法输入
   - 提供生成按钮

5. **Prompt展示组件**：PromptDisplay.vue
   - 展示生成的Prompt内容
   - 支持流式展示效果

6. **优化组件**：PromptOptimizer.vue
   - 提供Prompt优化功能
   - 支持用户反馈输入

7. **管理抽屉组件**：PromptManagerDrawer.vue
   - 展示和管理已保存的Prompt
   - 提供测试预览、编辑保存和删除功能
   - 支持标签管理功能

### 后端架构
后端基于PromptPilot结构体实现，主要功能包括：

1. **Prompt生成**：
   - GeneratePrompt: 生成Prompt
   - GeneratePromptStream: 流式生成Prompt

2. **Prompt优化**：
   - OptimizePrompt: 优化Prompt
   - OptimizePromptBatch: 批量优化Prompt

3. **Prompt管理**：
   - ListPrompts: 获取Prompt列表
   - GetPrompt: 获取Prompt详情
   - SavePrompt: 保存Prompt
   - UpdatePrompt: 更新Prompt
   - DeletePrompt: 删除Prompt

4. **模型与服务管理**：
   - ListModelsByServer: 获取模型列表
   - GetServers: 获取服务器列表
   - TestServerConnection: 测试服务器连接
   - GetActiveServer: 获取激活的服务器

5. **标签管理**：
   - ListTags: 获取标签列表
   - CreateTag: 创建标签
   - DeleteTag: 删除标签

## 开发规范

### 代码规范
1. 遵循Vue和TypeScript最佳实践
2. 使用Element Plus组件库
3. 保持代码风格一致性
4. 添加必要的注释说明

### 测试规范
1. 关键业务逻辑需要单元测试
2. 组件需要进行功能测试
3. 接口需要进行集成测试

### 文档规范
1. 及时更新相关文档
2. 保持文档与代码同步
3. 提供清晰的使用说明

## 部署与维护

### 部署要求
1. 需要安装Wails开发环境
2. 需要配置相应的AI服务
3. 需要duolasdk运行环境

### 维护建议
1. 定期备份Prompt数据
2. 监控系统性能和错误日志
3. 及时更新依赖库版本

## 界面设计特点

### 抽屉式交互
- 采用抽屉式设计替代传统弹窗，提供更流畅的用户体验
- 优化、保存和已保存功能均通过右侧抽屉实现
- 抽屉支持平滑的滑入滑出动画效果

### 按钮布局优化
- 操作按钮区域布局合理，按钮文字简洁明了
- 「优化」、「保存」和「已保存」按钮并排显示
- 主操作按钮「生成Prompt」位于输入区域下方

### 响应式设计
- 界面采用响应式布局，适配不同屏幕尺寸
- 左侧服务和模型选择区域、中间主内容区域和右侧抽屉区域合理分配空间
- 在小屏幕设备上自动调整布局以保证可用性