# PromptPilot待办事项

## 第一阶段已完成事项 (Milestone 1)

- **[x] 核心功能与架构**
  - [x] 完成功能需求、界面设计、数据结构及API接口的详细设计与文档编写。
  - [x] **后端**: 实现基于Wails事件的流式生成架构 (`GeneratePromptStream` 通过广播 `prompt_pilot_stream` 等事件与前端通信)。
  - [x] **后端**: 实现完整的Prompt管理CRUD接口 (`SavePrompt`, `ListPrompts`, `GetPrompt`, `DeletePrompt`)。
  - [x] **前端**: 搭建了完整的单栏垂直布局，替代了原有的三栏式设计。
  - [x] **前端**: 实现了事件驱动的流式生成逻辑，能够正确监听后端事件并更新UI。

- **[x] 界面与交互**
  - [x] 重构模型选择器（`ModelSelector.vue`）为内联式布局，并将其整合到主视图中。
  - [x] 实现主“生成”按钮功能，支持并行触发多个模型的流式生成。
  - [x] 实现单个模型的“重新生成”功能。
  - [x] 实现Prompt内容的“复制”功能。
  - [x] 实现完整的Prompt管理抽屉，支持列表展示、预览、保存和删除（含确认弹窗）功能。
  - [x] 修复了内容展示区超长时，只在内部滚动的布局问题。
  - [x] 优化了所有相关按钮在不同加载状态（全局加载、单个模型加载）下的禁用逻辑，防止用户误操作。
  - [x] 优化了下拉菜单的样式细节（如选项居左对齐）。

- **[x] 组件重构 (合二为一)**
  - [x] **创建通用组件**: 创建了全新的、可复用的 `CommonPromptDrawer.vue` 组件，通过 `mode` 属性支持“管理”和“选择”两种模式。
  - [x] **重构 `PromptPilot.vue`**: 使用 `CommonPromptDrawer` 替换了旧的 `SavedPromptsDrawer.vue`，并以 `mode="manage"` 模式调用。
  - [x] **重构 `ChatManager.vue`**: 使用 `CommonPromptDrawer` 替换了旧的 `SystemPromptDrawer.vue`，并以 `mode="select"` 模式调用。
  - [x] **清理代码**: 删除了冗余的 `SavedPromptsDrawer.vue` 和 `SystemPromptDrawer.vue` 文件。

- **[x] 文档同步**
  - [x] 已将本次开发的所有代码实现，同步更新到所有相关的设计文档中，确保代码与文档一致。

## 下一阶段待办事项

- [ ] **功能完善**
  - [ ] **实现“优化Prompt”抽屉**: 在点击「优化」按钮后弹出的抽屉中，加入一个文本输入框供用户填写优化建议，并实现一个“确认优化”按钮来调用后端的`OptimizePrompt`接口。

- [ ] **用户体验提升**
  - [ ] **添加操作引导**: 考虑使用`Element Plus`的`Tour`组件或简单的`Tooltip`，在用户首次进入页面时，引导其完成“输入想法 -> 选择模型 -> 点击生成”的核心流程。
  - [ ] **实现快捷键支持**: 为「生成」按钮绑定`Ctrl+Enter`快捷键，提升操作效率。
  - [ ] **完善响应式设计**: 确保在窗口宽度变窄时，控件栏能优雅地换行，而不是挤在一起。
  - [ ] **细化错误处理**: 为所有与后端交互的函数添加更全面的`.catch`块，并在捕获到错误时，使用`ElMessage.error`向用户显示清晰的失败提示。

- [ ] **测试与质量保障**
  - [ ] **后端单元测试**: 为`prompt_pilot.go`中的`SavePrompt`（测试创建和更新两种情况）、`ListPrompts`和`DeletePrompt`函数编写Go单元测试。
  - [ ] **前端组件测试**: 对`ModelSelector.vue`和`CommonPromptDrawer.vue`进行功能测试。
  - [ ] **端到端集成测试**: 完整测试一次从“输入想法”到最终“保存Prompt”的全流程，以及在`ChatManager`中选择系统提示词的全流程。

## 未来可能的改进点

- [ ] **Prompt模板库**: 提供常用Prompt模板供用户选择，并支持用户创建和分享模板。
- [ ] **Prompt版本管理**: 支持查看和回滚Prompt的历史版本。
- [ ] **技术栈优化**: 考虑引入状态管理库（如Pinia）来替代目前复杂的 `props/event` 组件间通信机制。
