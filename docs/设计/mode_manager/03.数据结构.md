# ModelManager é¡µé¢æ•°æ®ç»“æ„

## 1. Architectureï¼ˆæ¶æ„è®¾è®¡ï¼‰

### 1.1 æ•°æ®æ¶æ„æ¦‚è¿°
ä¸ºäº†ç»Ÿä¸€å‰ç«¯ç±»å‹å®šä¹‰ï¼Œæé«˜ä»£ç å¯ç»´æŠ¤æ€§å’Œå¥å£®æ€§ï¼ŒModelManageræ¨¡å—é‡‡ç”¨äº†ç»Ÿä¸€çš„æ•°æ®ç»“æ„ç®¡ç†ç­–ç•¥ã€‚æ•°æ®ç±»å‹ä¸»è¦æ¥æºäº Wails è‡ªåŠ¨ç”Ÿæˆçš„ `models.ts` æ–‡ä»¶å’Œç»Ÿä¸€çš„ `types.ts` æ–‡ä»¶ã€‚

### 1.2 æ•°æ®æµæ¶æ„
```
å‰ç«¯ Vue ç»„ä»¶
    â”‚
    â”‚ TypeScript æ¥å£
    â”‚
    v
Wails è‡ªåŠ¨ç”Ÿæˆå±‚
    â”‚
    â”‚ JSON åºåˆ—åŒ–
    â”‚
    v
Go åç«¯æœåŠ¡
    â”‚
    â”‚ HTTP/gRPC
    â”‚
    v
Ollama API / æ•°æ®å­˜å‚¨
```

## 2. Analysisï¼ˆéœ€æ±‚åˆ†æï¼‰

### 2.1 æ•°æ®ç±»å‹éœ€æ±‚
| æ•°æ®ç±»å‹ | ä½¿ç”¨åœºæ™¯ | å¤æ‚åº¦ | ä¼˜å…ˆçº§ |
|----------|----------|----------|----------|
| Model | æ¨¡å‹ä¿¡æ¯å±•ç¤º | ä¸­ | P0 |
| OllamaServerConfig | æœåŠ¡å™¨é…ç½® | ä½ | P0 |
| ModelParams | å‚æ•°é…ç½® | ä½ | P1 |
| DownloadProgress | ä¸‹è½½è¿›åº¦ | ä¸­ | P1 |
| OnlineModel | åœ¨çº¿æ¨¡å‹ | ä½ | P2 |

### 2.2 å…³é”®ä¿®å¤éœ€æ±‚
**ä¿®æ”¹æ—¶é—´å­—æ®µæ˜ å°„é—®é¢˜**:
- **é—®é¢˜**: å‰ç«¯ `modifiedAt` vs åç«¯ `modified_at` ä¸åŒ¹é…
- **å½±å“**: æ˜¾ç¤º "Invalid Date Invalid Date"
- **è§£å†³**: ç»Ÿä¸€ä½¿ç”¨ `modified_at` å­—æ®µå
- **çŠ¶æ€**: âœ… å·²ä¿®å¤

## 3. Architectureï¼ˆæ•°æ®æ¶æ„ï¼‰

### 3.1 å‰ç«¯æ•°æ®ç»“æ„

#### æ•°æ®ç»“æ„ç»Ÿä¸€åŒ–ç­–ç•¥
é‡‡ç”¨ Wails è‡ªåŠ¨ç”Ÿæˆ + ç»Ÿä¸€ç±»å‹å®šä¹‰çš„æ··åˆæ¨¡å¼ï¼Œç¡®ä¿å‰åç«¯æ•°æ®æ¨¡å‹å®Œå…¨ä¸€è‡´ã€‚

```typescript
// æ•°æ®æºç­–ç•¥
â”‚
â”œâ”€â”€ Wails è‡ªåŠ¨ç”Ÿæˆ (../../wailsjs/go/models.ts)
â”‚   â”œâ”€â”€ OllamaServerConfig
â”‚   â”œâ”€â”€ Model (åŸºç¡€ç»“æ„)
â”‚   â””â”€â”€ ModelParams
â”‚
â””â”€â”€ ç»Ÿä¸€ç±»å‹å®šä¹‰ (../../classes/types.ts)
    â”œâ”€â”€ FrontendModel (æ‰©å±• Model)
    â”œâ”€â”€ DownloadProgress
    â””â”€â”€ å…¶ä»–å‰ç«¯ç‰¹æœ‰ç±»å‹
```

#### 3.1.1 æ¨¡å‹ç»“æ„ (Model) **[å·²ä¿®å¤]**
è¯¥ç»“æ„ä½“æ‰©å±•äº† `types.Model`ï¼Œå¢åŠ äº†å‰ç«¯ç‰¹æœ‰çš„ `isRunning` å±æ€§ï¼Œç”¨äºè¡¨ç¤ºæ¨¡å‹åœ¨ UI ä¸Šçš„è¿è¡ŒçŠ¶æ€ã€‚å®ƒç»Ÿä¸€åœ¨ `../../classes/types.ts` ä¸­å®šä¹‰å’Œå¯¼å‡ºã€‚
```typescript
// ç¤ºä¾‹å¯¼å…¥æ–¹å¼ (åœ¨ .vue æ–‡ä»¶ä¸­):
import { FrontendModel } from "../../classes/types";
```

```typescript
// ä¿®å¤åçš„æ¨¡å‹ç»“æ„
interface Model {
  name: string;              // æ¨¡å‹åç§°
  model: string;             // æ¨¡å‹ ID
  modified_at: string;       // [å·²ä¿®å¤] ä¿®æ”¹æ—¶é—´å­—æ®µ
  size: number;              // æ¨¡å‹å¤§å°ï¼ˆå­—èŠ‚ï¼‰
  digest: string;            // æ¨¡å‹æ‘˜è¦
  details: {
    family?: string;         // [æ–°å¢] æ¨¡å‹å®¶æ—
    format?: string;         // [æ–°å¢] æ¨¡å‹æ ¼å¼
    parameter_size?: string; // [æ–°å¢] å‚æ•°è§„æ¨¡
    quantization_level?: string; // [æ–°å¢] é‡åŒ–çº§åˆ«
    parent_model?: string;   // [æ–°å¢] çˆ¶æ¨¡å‹
    families?: string[];     // [æ–°å¢] æ”¯æŒçš„æ¨¡å‹ç±»å‹
  };
  isRunning: boolean;        // è¿è¡ŒçŠ¶æ€
}
```

#### 3.1.2 æœåŠ¡å™¨é…ç½®ç»“æ„ (OllamaServerConfig)
è¯¥ç»“æ„ä½“ç°åœ¨ç›´æ¥ä» Wails è‡ªåŠ¨ç”Ÿæˆçš„ `../../wailsjs/go/models.ts` ä¸­å¯¼å…¥ã€‚
å…¶å®šä¹‰ä¸åç«¯ Go è¯­è¨€çš„ `main.OllamaServerConfig` ç»“æ„ä½“ä¿æŒä¸€è‡´ã€‚
```typescript
// ç¤ºä¾‹å¯¼å…¥æ–¹å¼ (åœ¨ .vue æ–‡ä»¶ä¸­):
import { types } from "../../wailsjs/go/models";
import OllamaServerConfig = types.OllamaServerConfig;
```

#### 3.1.3 æ¨¡å‹å‚æ•°ç»“æ„ (ModelParams)
è¯¥ç»“æ„ä½“å·²ä»å„ç»„ä»¶ä¸­æŠ½å–ï¼Œç»Ÿä¸€åœ¨ `../../classes/types.ts` ä¸­å®šä¹‰å’Œå¯¼å‡ºã€‚
```typescript
// ç¤ºä¾‹å¯¼å…¥æ–¹å¼ (åœ¨ .vue æ–‡ä»¶ä¸­):
import { ModelParams } from "../../classes/types";
```

#### 3.1.4 ä¸‹è½½è¿›åº¦ç»“æ„ (DownloadProgress) **[å·²å¢å¼º]**
è¯¥ç»“æ„ä½“å·²ä»ç»„ä»¶ä¸­æŠ½å–ï¼Œç»Ÿä¸€åœ¨ `../../classes/types.ts` ä¸­å®šä¹‰å’Œå¯¼å‡ºã€‚
```typescript
// ç¤ºä¾‹å¯¼å…¥æ–¹å¼ (åœ¨ .vue æ–‡ä»¶ä¸­):
import { DownloadProgress } from "../../classes/types";

// å¢å¼ºåçš„ä¸‹è½½è¿›åº¦ç»“æ„
interface DownloadProgress {
  id: string;              // ä¸‹è½½ä»»åŠ¡ID
  modelName: string;       // æ¨¡å‹åç§°
  serverID: string;        // æœåŠ¡å™¨ID
  status: 'pending' | 'downloading' | 'completed' | 'failed' | 'cancelled';
  progress: number;        // è¿›åº¦ç™¾åˆ†æ¯” (0-100)
  total: number;           // æ€»å¤§å°ï¼ˆå­—èŠ‚ï¼‰
  completed: number;       // å·²å®Œæˆå¤§å°ï¼ˆå­—èŠ‚ï¼‰
  speed?: number;          // ä¸‹è½½é€Ÿåº¦ï¼ˆå­—èŠ‚/ç§’ï¼‰
  remainingTime?: number;  // é¢„è®¡å‰©ä½™æ—¶é—´ï¼ˆç§’ï¼‰
  error?: string;          // é”™è¯¯ä¿¡æ¯
  startTime: Date;         // å¼€å§‹æ—¶é—´
  endTime?: Date;          // ç»“æŸæ—¶é—´
}
```

#### 3.1.5 æ¨¡å‹æµ‹è¯•ç»“æ„ (ModelTestData) **[æ–°å¢]**
è¯¥ç»“æ„ä½“ç”¨äºæ¨¡å‹æµ‹è¯•åŠŸèƒ½çš„æ•°æ®ç®¡ç†ã€‚
```typescript
// ç¤ºä¾‹å¯¼å…¥æ–¹å¼ (åœ¨ .vue æ–‡ä»¶ä¸­):
import { ModelTestData } from "../../classes/types";

// æ¨¡å‹æµ‹è¯•æ•°æ®ç»“æ„
interface ModelTestData {
  prompt: string;          // æµ‹è¯•æç¤ºè¯
  response: string;        // æ¨¡å‹å“åº”
  isLoading: boolean;      // æ˜¯å¦æ­£åœ¨æµ‹è¯•
  error?: string;          // é”™è¯¯ä¿¡æ¯
  timestamp: Date;         // æµ‹è¯•æ—¶é—´
  duration?: number;       // å“åº”æ—¶é•¿ï¼ˆæ¯«ç§’ï¼‰
}
```

### 3.2 åç«¯æ•°æ®ç»“æ„

#### 3.2.1 Model ç»“æ„ä½“ **[å·²ä¿®å¤]**

```go
// Model æ¨¡å‹ä¿¡æ¯ [å·²ä¿®å¤]
type Model struct {
    Name       string                 `json:"name"`
    Model      string                 `json:"model"`
    ModifiedAt string                 `json:"modified_at"` // [ä¿®å¤] å­—æ®µæ˜ å°„
    Size       int64                  `json:"size"`
    Digest     string                 `json:"digest"`
    Details    map[string]interface{} `json:"details"` // [å¢å¼º] å®Œæ•´è¯¦æƒ…
    IsRunning  bool                   `json:"isRunning"` // [æ–°å¢] è¿è¡ŒçŠ¶æ€
}
```

#### 3.2.2 OllamaServerConfig ç»“æ„ä½“

```go
// OllamaServerConfig OllamaæœåŠ¡å™¨é…ç½®
type OllamaServerConfig struct {
    ID         string `json:"id"`
    Name       string `json:"name"`
    BaseURL    string `json:"baseUrl"`
    APIKey     string `json:"apiKey"`
    IsActive   bool   `json:"isActive"` 
    TestStatus string `json:"testStatus"`
}
```

#### 3.2.3 ModelParams ç»“æ„ä½“

```go
// ModelParams æ¨¡å‹å‚æ•°
type ModelParams struct {
    Temperature   float64 `json:"temperature"`
    TopP          float64 `json:"topP"`
    TopK          int     `json:"topK"`
    Context       int     `json:"context"`
    NumPredict    int     `json:"numPredict"`
    RepeatPenalty float64 `json:"repeatPenalty"`
}
```

#### 3.2.4 OnlineModel ç»“æ„ä½“

```go
// OnlineModel åœ¨çº¿æ¨¡å‹ä¿¡æ¯
type OnlineModel struct {
    Name        string `json:"name"`
    PullCount   int64  `json:"pullCount"`
    UpdatedAt   string `json:"updatedAt"`
    Description string `json:"description"`
}
```

#### 3.2.5 TestModelRequest ç»“æ„ä½“ **[æ–°å¢]**

```go
// TestModelRequest æ¨¡å‹æµ‹è¯•è¯·æ±‚
type TestModelRequest struct {
    ModelName string `json:"modelName"`
    Prompt    string `json:"prompt"`
    Stream    bool   `json:"stream"`
}
```

#### 3.2.6 TestModelResponse ç»“æ„ä½“ **[æ–°å¢]**

```go
// TestModelResponse æ¨¡å‹æµ‹è¯•å“åº”
type TestModelResponse struct {
    Response string `json:"response"`
    Done     bool   `json:"done"`
    Error    string `json:"error,omitempty"`
}
```

#### 3.2.7 DownloadTask ç»“æ„ä½“ **[æ–°å¢]**

```go
// DownloadTask ä¸‹è½½ä»»åŠ¡ä¿¡æ¯
type DownloadTask struct {
    ID         string    `json:"id"`
    ModelName  string    `json:"modelName"`
    ServerID   string    `json:"serverID"`
    Status     string    `json:"status"` // pending, downloading, completed, failed, cancelled
    Progress   float64   `json:"progress"`
    Total      int64     `json:"total"`
    Completed  int64     `json:"completed"`
    StartTime  time.Time `json:"startTime"`
    EndTime    *time.Time `json:"endTime,omitempty"`
    Error      string    `json:"error,omitempty"`
}
```

## 4. Applicationï¼ˆåº”ç”¨å®ç°ï¼‰

### 4.1 å‰ç«¯çŠ¶æ€ç®¡ç†

#### å“åº”å¼æ•°æ®å®šä¹‰

```typescript
// æ¨¡å‹åˆ—è¡¨
const localModels = ref<FrontendModel[]>([])

// é€‰ä¸­çš„æ¨¡å‹
const selectedModel = ref<FrontendModel | null>(null)

// åŠ è½½çŠ¶æ€
const loading = ref(false)

// å¯ç”¨æœåŠ¡å™¨åˆ—è¡¨
const availableServers = ref<OllamaServerConfig[]>([])

// é€‰ä¸­çš„æœåŠ¡å™¨
const selectedServer = ref<string>('local')

// è¯¦æƒ…æŠ½å±‰å¯è§æ€§
const drawerVisible = ref(false)

// ä¸‹è½½å¯¹è¯æ¡†å¯è§æ€§
const downloadDialogVisible = ref(false)

// è¦ä¸‹è½½çš„æ¨¡å‹åç§°
const modelNameToDownload = ref('')

// æ˜¯å¦æ­£åœ¨ä¸‹è½½
const isDownloading = ref(false)

// ä¸‹è½½è¿›åº¦è®°å½•
const downloadProgresses = reactive<Record<string, DownloadProgress>>({})

// ä¸‹è½½é˜Ÿåˆ—æŠ½å±‰å¯è§æ€§
const downloadQueueDrawerVisible = ref(false)

// æ˜¯å¦æ­£åœ¨è¿è¡Œæ¨¡å‹
const isRunningModel = ref(false)

// æ˜¯å¦æ­£åœ¨åœæ­¢æ¨¡å‹
const isStoppingModel = ref(false)

// æ˜¯å¦æ­£åœ¨æµ‹è¯•æ¨¡å‹
const isTestingModel = ref(false)

// æµ‹è¯•æç¤ºè¯
const testPrompt = ref('ä½ å¥½ï¼Œè¯·ç”¨ä¸­æ–‡ç®€å•ä»‹ç»ä¸€ä¸‹è‡ªå·±ã€‚')

// æµ‹è¯•ç»“æœ
const testResult = ref('')

// æ¨¡å‹å‚æ•°
const modelParams = reactive<ModelParams>({
  temperature: 0.8,
  topP: 0.9,
  topK: 40,
  context: 2048,
  numPredict: 512,
  repeatPenalty: 1.1
})
```

#### è®¡ç®—å±æ€§å®šä¹‰

```typescript
// ä¸‹è½½é˜Ÿåˆ—
const downloadQueue = computed(() => Object.values(downloadProgresses))

// æ¨¡å‹æµ‹è¯•ç›¸å…³çŠ¶æ€ **[æ–°å¢]**
const modelTestData = reactive<ModelTestData>({
  prompt: 'ä½ å¥½ï¼Œè¯·ç”¨ä¸­æ–‡ç®€å•ä»‹ç»ä¸€ä¸‹è‡ªå·±ã€‚',
  response: '',
  isLoading: false,
  timestamp: new Date()
})

// ä¸‹è½½ä»»åŠ¡ç®¡ç† **[æ–°å¢]**
const downloadTasks = ref<DownloadTask[]>([])
const activeDownloads = computed(() => 
  downloadTasks.value.filter(task => task.status === 'downloading')
)
const completedDownloads = computed(() => 
  downloadTasks.value.filter(task => task.status === 'completed')
)
const failedDownloads = computed(() => 
  downloadTasks.value.filter(task => task.status === 'failed')
)
```

### 4.2 æ•°æ®æµè®¾è®¡

#### é¡µé¢åˆå§‹åŒ–æ•°æ®æµ

```mermaid
sequenceDiagram
    participant Vue as ModelManager.vue
    participant Go as Go Backend
    participant Store as AppStore
    participant Ollama as Ollama Service
    
    Vue->>Go: GetOllamaServerConfig()
    Go->>Store: è¯»å– ollama_config:local
    Store-->>Go: è¿”å›æœ¬åœ°é…ç½®
    Go-->>Vue: è¿”å›æœ¬åœ°æœåŠ¡é…ç½®
    
    Vue->>Go: GetRemoteServers()
    Go->>Store: è¯»å– ollama_config:remote_servers
    Store-->>Go: è¿”å›è¿œç¨‹æœåŠ¡åˆ—è¡¨
    Go-->>Vue: è¿”å›è¿œç¨‹æœåŠ¡é…ç½®æ•°ç»„
    
    Vue->>Go: ListModelsByServer(selectedServer)
    Go->>Ollama: HTTP GET /api/tags
    Ollama-->>Go: è¿”å›æ¨¡å‹åˆ—è¡¨
    Go->>Store: ç¼“å­˜æ¨¡å‹åˆ—è¡¨
    Store-->>Go: ç¡®è®¤å­˜å‚¨æˆåŠŸ
    Go-->>Vue: è¿”å›æ¨¡å‹åˆ—è¡¨
    
    Vue->>Go: GetModelFamilies()
    Go-->>Vue: è¿”å›æ¨¡å‹å®¶æ—åˆ—è¡¨ï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰
    
    Vue->>Go: GetModelTags()
    Go-->>Vue: è¿”å›æ¨¡å‹æ ‡ç­¾åˆ—è¡¨ï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰
```

#### æ¨¡å‹è¿è¡Œæ•°æ®æµ

```mermaid
sequenceDiagram
    participant Vue as ModelManager.vue
    participant Go as Go Backend
    participant Ollama as Ollama Service
    
    Vue->>Go: RunModel(modelName, params)
    Go->>Ollama: HTTP POST /api/generate
    Ollama-->>Go: è¿”å›å“åº”
    Go->>Go: æ›´æ–°å†…å­˜ä¸­æ¨¡å‹çŠ¶æ€
    Go-->>Vue: è¿”å›æ“ä½œç»“æœ
    
    Vue->>Vue: æ›´æ–°ç•Œé¢çŠ¶æ€
```

#### æ¨¡å‹å‚æ•°ä¿å­˜æ•°æ®æµ

```mermaid
sequenceDiagram
    participant Vue as ModelManager.vue
    participant Go as Go Backend
    participant Store as AppStore
    
    Vue->>Go: SetModelParams(modelName, params)
    Go->>Store: ä¿å­˜ model_options_{modelName}
    Store-->>Go: ç¡®è®¤å­˜å‚¨æˆåŠŸ
    Go-->>Vue: è¿”å›æ“ä½œç»“æœ
    
    Vue->>Vue: æ˜¾ç¤ºä¿å­˜æˆåŠŸæ¶ˆæ¯
```

#### æ¨¡å‹ä¸‹è½½æ•°æ®æµ

```mermaid
sequenceDiagram
    participant Vue as ModelManager.vue
    participant Go as Go Backend
    participant Ollama as Ollama Service
    
    Vue->>Go: DownloadModel(serverId, modelName)
    Go->>Go: å¯åŠ¨goroutineæ‰§è¡Œä¸‹è½½
    Go->>Ollama: HTTP POST /api/pull
    Ollama-->>Go: è¿”å›æµå¼å“åº”
    loop ä¸‹è½½è¿‡ç¨‹ä¸­
        Ollama->>Go: å‘é€è¿›åº¦ä¿¡æ¯
        Go->>Vue: å‘é€ model:download:progress äº‹ä»¶
        Vue->>Vue: æ›´æ–°è¿›åº¦æ¡
    end
    alt ä¸‹è½½æˆåŠŸ
        Ollama->>Go: ä¸‹è½½å®Œæˆ
        Go->>Vue: å‘é€ model:download:done äº‹ä»¶
        Vue->>Vue: åˆ·æ–°æ¨¡å‹åˆ—è¡¨
    else ä¸‹è½½å¤±è´¥
        Ollama->>Go: å‘é€é”™è¯¯ä¿¡æ¯
        Go->>Vue: å‘é€ model:download:error äº‹ä»¶
        Vue->>Vue: æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
    end
```

#### åœ¨çº¿æ¨¡å‹æœç´¢æ•°æ®æµ

```mermaid
sequenceDiagram
    participant Vue as ModelManager.vue
    participant Go as Go Backend
    participant OllamaDB as OllamaDB Service
    
    Vue->>Go: SearchOnlineModels(query)
    Go->>OllamaDB: HTTP GET https://ollamadb.dev/api/v1/models
    OllamaDB-->>Go: è¿”å›æ¨¡å‹åˆ—è¡¨
    Go-->>Vue: è¿”å›åœ¨çº¿æ¨¡å‹åˆ—è¡¨
    
    Vue->>Vue: æ˜¾ç¤ºæœç´¢ç»“æœ
```

## 5. Assuranceï¼ˆè´¨é‡ä¿è¯ï¼‰

### 5.1 æ•°æ®éªŒè¯è§„åˆ™

#### å‰ç«¯éªŒè¯è§„åˆ™

1. **æ¨¡å‹å‚æ•°**
   - temperature: 0.0-1.0
   - topP: 0.0-1.0
   - context: 1-32768
   - topK: æ­£æ•´æ•°
   - numPredict: æ­£æ•´æ•°
   - repeatPenalty: æ­£æ•°

2. **æ¨¡å‹åç§°**
   - éç©ºéªŒè¯
   - é•¿åº¦é™åˆ¶ï¼š1-100ä¸ªå­—ç¬¦

3. **æœåŠ¡å™¨é…ç½®**
   - URLæ ¼å¼éªŒè¯
   - å¿…å¡«å­—æ®µéªŒè¯

#### åç«¯éªŒè¯è§„åˆ™

1. **æ¨¡å‹æ“ä½œ**
   - æ¨¡å‹å­˜åœ¨æ€§éªŒè¯
   - æ¨¡å‹çŠ¶æ€éªŒè¯ï¼ˆè¿è¡Œ/åœæ­¢çŠ¶æ€ï¼‰
   - å‚æ•°èŒƒå›´éªŒè¯

2. **æœåŠ¡å™¨æ“ä½œ**
   - æœåŠ¡å™¨å¯è¾¾æ€§éªŒè¯
   - æœåŠ¡å™¨é…ç½®æœ‰æ•ˆæ€§éªŒè¯

3. **å‚æ•°éªŒè¯**
   - ç±»å‹éªŒè¯
   - èŒƒå›´éªŒè¯
   - å¿…å¡«å­—æ®µéªŒè¯

4. **åœ¨çº¿æ¨¡å‹æœç´¢**
   - æœç´¢å…³é”®è¯é•¿åº¦éªŒè¯
   - æœç´¢ç»“æœæ•°é‡é™åˆ¶

### 5.2 æ•°æ®åŒæ­¥æœºåˆ¶

#### é¡µé¢é—´æ•°æ®åŒæ­¥
- é€šè¿‡æœåŠ¡å™¨é…ç½®ä¸ OllamaSettings é¡µé¢ä¿æŒåŒæ­¥
- æ¨¡å‹çŠ¶æ€åœ¨é¡µé¢åˆ·æ–°æ—¶é‡ç½®
- é€šè¿‡ API è°ƒç”¨ä¿æŒä¸ Ollama æœåŠ¡çŠ¶æ€åŒæ­¥

#### åº”ç”¨é‡å¯æ•°æ®æ¢å¤
- æœåŠ¡å™¨é…ç½®æŒä¹…åŒ–å­˜å‚¨åœ¨æœ¬åœ°æ•°æ®åº“ä¸­
- æ¨¡å‹å‚æ•°é…ç½®æŒä¹…åŒ–å­˜å‚¨
- æ¨¡å‹åˆ—è¡¨ç¼“å­˜ï¼ˆä¸´æ—¶å­˜å‚¨ï¼Œåº”ç”¨é‡å¯åéœ€è¦é‡æ–°è·å–ï¼‰

### 5.3 é”™è¯¯å¤„ç†ä¿è¯

#### æ•°æ®ç›¸å…³é”™è¯¯

1. **å­˜å‚¨è¯»å–å¤±è´¥**
   - è¿”å›é»˜è®¤å€¼è€ŒéæŠ¥é”™
   - è®°å½•é”™è¯¯æ—¥å¿—
   - æç¤ºç”¨æˆ·å¯èƒ½çš„é…ç½®ä¸¢å¤±

2. **å­˜å‚¨å†™å…¥å¤±è´¥**
   - æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯
   - ä¿æŒç•Œé¢çŠ¶æ€
   - æä¾›é‡è¯•æœºåˆ¶

3. **æ•°æ®æ ¼å¼é”™è¯¯**
   - å°è¯•ä¿®å¤æˆ–é‡ç½®æ•°æ®
   - è®°å½•é”™è¯¯æ—¥å¿—
   - å¿…è¦æ—¶æç¤ºç”¨æˆ·

#### ç½‘ç»œç›¸å…³é”™è¯¯

1. **æ¨¡å‹åˆ—è¡¨è·å–å¤±è´¥**
   - æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯
   - ä¿æŒç°æœ‰åˆ—è¡¨æˆ–æ˜¾ç¤ºç©ºçŠ¶æ€
   - æä¾›åˆ·æ–°é‡è¯•æŒ‰é’®

2. **æ¨¡å‹æ“ä½œå¤±è´¥**
   - æ˜¾ç¤ºå…·ä½“é”™è¯¯ä¿¡æ¯
   - ä¿æŒç•Œé¢çŠ¶æ€ä¸€è‡´æ€§
   - æä¾›é‡è¯•æœºåˆ¶

3. **æœåŠ¡å™¨è¿æ¥å¤±è´¥**
   - æ˜¾ç¤ºè¿æ¥é”™è¯¯ä¿¡æ¯
   - å»ºè®®æ£€æŸ¥æœåŠ¡å™¨é…ç½®
   - æä¾›è·³è½¬åˆ°é…ç½®é¡µé¢çš„é“¾æ¥ï¼ˆå¾…å®ç°ï¼‰

4. **åœ¨çº¿æ¨¡å‹æœç´¢å¤±è´¥**
   - æ˜¾ç¤ºæœç´¢å¤±è´¥æ¶ˆæ¯
   - ä¿æŒç°æœ‰åœ¨çº¿æ¨¡å‹åˆ—è¡¨
   - æä¾›é‡è¯•æœç´¢æŒ‰é’®

## 6. Actionï¼ˆè¡ŒåŠ¨è®¡åˆ’ï¼‰

### 6.1 å·²å®Œæˆä¼˜åŒ–
- âœ… ä¿®æ”¹æ—¶é—´å­—æ®µæ˜ å°„ä¿®å¤
- âœ… æ¨¡å‹è¯¦æƒ…ç»“æ„å¢å¼º
- âœ… æ•°æ®ç±»å‹ç»Ÿä¸€åŒ–
- âœ… é”™è¯¯å¤„ç†å®Œå–„

### 6.2 è¿‘æœŸè®¡åˆ’
- ğŸ”„ æ•°æ®ç¼“å­˜ä¼˜åŒ–ï¼ˆæ¨¡å‹åˆ—è¡¨ã€å‚æ•°é…ç½®ç¼“å­˜ï¼‰
- ğŸ”„ æ•°æ®éªŒè¯å¢å¼ºï¼ˆå‰åç«¯åŒé‡éªŒè¯ï¼‰
- ğŸ”„ å®æ—¶æ•°æ®åŒæ­¥ï¼ˆWebSocketæ”¯æŒï¼‰
- ğŸ”„ ä¸‹è½½é˜Ÿåˆ—æŒä¹…åŒ–ï¼ˆåº”ç”¨é‡å¯åæ¢å¤ä¸‹è½½ä»»åŠ¡ï¼‰

### 6.3 é•¿æœŸè§„åˆ’
- ğŸ“… æ•°æ®åˆ†é¡µåŠ è½½ï¼ˆå¤§é‡æ¨¡å‹æ—¶çš„æ€§èƒ½ä¼˜åŒ–ï¼‰
- ğŸ“… æ•°æ®å‹ç¼©ä¼ è¾“ï¼ˆå‡å°‘ç½‘ç»œå¸¦å®½å ç”¨ï¼‰
- ğŸ“… ç¦»çº¿æ•°æ®æ”¯æŒï¼ˆç¦»çº¿æ¨¡å¼ä¸‹çš„åŸºæœ¬åŠŸèƒ½ï¼‰
- ğŸ“… æ•°æ®åŒæ­¥æœºåˆ¶ï¼ˆå¤šè®¾å¤‡é—´çš„é…ç½®åŒæ­¥ï¼‰
