# 需求文档目录

该目录包含项目的所有需求文档，按照功能模块和通用文档进行分类。

## 目录结构

```
需求/
├── README.md                  # 本文件
├── 通用文档/                  # 所有模块通用的文档
│   └── 开发规范.md           # 统一的开发规范
├── ChatManager/              # 聊天管理器模块
│   ├── 01.功能需求.md
│   ├── 02.界面设计.md
│   ├── 03.数据结构.md
│   ├── 04.API接口.md
│   └── 06.待办事项.md
├── ModelManager/             # 模型管理模块
│   ├── 01.功能需求.md
│   ├── 02.界面设计.md
│   ├── 03.数据结构.md
│   ├── 04.API接口.md
│   └── 06.待办事项.md
├── ModelMarket/              # 模型市场模块
│   ├── 01.功能需求.md
│   ├── 02.界面设计.md
│   ├── 03.数据结构.md
│   ├── 04.API接口.md
│   └── 06.待办事项.md
├── OllamaSettings/           # 服务设置模块
│   ├── 01.功能需求.md
│   ├── 02.界面设计.md
│   ├── 03.数据结构.md
│   ├── 04.API接口.md
│   └── 06.待办事项.md
└── PromptPilot/              # 提示词工程模块
    ├── 01.功能需求.md
    ├── 02.界面设计.md
    ├── 03.数据结构.md
    ├── 04.API接口.md
    └── 06.待办事项.md
```

## 架构更新概要 (近期重构)

项目后端进行了一次全面的架构优化，核心目标是提升代码的模块化、可维护性和健壮性。

1.  **统一数据模型 (`types` 包)**: 创建了 `tools-ollama/types` 包，将所有模块共享的核心数据结构（如 `OllamaServerConfig`, `Model`, `Prompt` 等）进行统一存放，解决了各模块重复定义结构体的问题。

2.  **依赖注入与逻辑下沉**: 对主入口 `app.go` 进行了解耦，将原本分散的业务逻辑（如模型管理、聊天处理）下沉到各自的管理器 (`Manager`) 中。应用启动时，通过构造函数为各个管理器注入 `store`、`logger` 等依赖，使模块职责更清晰，耦合度更低。

3.  **前端组件合并**: 统一了功能重复的前端组件，例如将多个提示词列表抽屉 (`PromptListDrawer`) 合并为 `src/components/commons/` 目录下的一个可复用组件，并通过 `mode` 属性区分其在不同场景下的行为。

4.  **配置存储优化**: 将 `OllamaSettings` 的服务器配置存储方式从“整个列表存成一个JSON字符串”优化为使用哈希表（Hash Map）对每个服务器进行独立存储，提高了配置更新的效率和安全性，并内置了从旧格式到新格式的无感数据迁移逻辑。

## 文档说明

### 通用文档
存放所有模块通用的文档，如开发规范、技术架构等。

### 模块文档
每个功能模块都有独立的目录，包含该模块的详细需求文档：

1.  **功能需求** - 描述模块的核心功能和交互逻辑
2.  **界面设计** - 包含页面布局和组件设计规范
3.  **数据结构** - 定义前后端数据结构和存储设计
4.  **API接口** - 详细说明所有API接口及调用时序
5.  **待办事项** - 记录已知问题、优化建议和未来规划

## 使用说明

开发人员应首先阅读通用文档，然后根据负责的模块阅读相应目录下的文档。