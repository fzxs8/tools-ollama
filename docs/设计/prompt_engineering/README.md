# PromptPilot模块

## 概述
PromptPilot是一个专门用于提示词工程的模块，帮助用户创建、优化和管理提示词。该模块提供直观的界面让用户能够快速生成初始提示词，对其进行调优，并支持多模型对比测试，以找到最佳的提示词配置。

## 主要功能
1. **提示词生成**：
   - 用户输入想法，系统基于选定模型和服务流式生成初始Prompt
   - 支持实时展示生成过程（通过Wails事件流式传输）

2. **提示词调优**：
   - 提供快速优化功能
   - 支持基于用户反馈的迭代优化

3. **提示词管理**：
   - 保存和管理用户自定义提示词
   - 提供测试预览、编辑保存和删除功能
   - 支持标签分类管理

4. **多模型对比测试**：
   - 支持同时使用3个模型进行对比测试
   - 直观展示不同模型的输出效果

5. **服务和模型管理**：
   - 支持选择已配置的Ollama服务
   - 动态加载选中服务中的模型列表

## 文档列表
- [功能需求](01.功能需求.md) - 详细描述模块功能需求
- [界面设计](02.界面设计.md) - 界面布局和组件设计
- [数据结构](03.数据结构.md) - 前后端数据结构定义
- [API接口](04.API接口.md) - 接口规范和调用方式
- [待办事项](06.待办事项.md) - 功能规划和改进计划

## 技术实现
- 前端：Vue3 + TypeScript + Element Plus
- 后端：Go + Wails框架
- 通信：通过Wails桥接前后端交互

## 架构设计

### 前端架构
前端采用组件化设计，主要包含以下组件：

1. **主容器组件 (PromptPilot.vue)**：
   - 负责整体页面布局和状态管理。
   - 集成想法输入、内容展示和所有操作按钮。
   - 协调各子组件间通信。

2. **服务与模型选择组件 (ModelSelector.vue)**：
   - 提供服务和模型选择功能，以水平布局的形式集成在主容器中。
   - 支持从已配置的Ollama服务中选择。
   - 支持动态加载并选择多个模型（最多3个）。

3. **管理抽屉组件 (SavedPromptsDrawer.vue, etc.)**：
   - 用于展示和管理已保存的Prompt、进行优化等。
   - 以抽屉（Drawer）的形式从侧边滑出，提供流畅的交互体验。

### 后端架构
后端基于`prompt_pilot.go`实现，主要功能包括Prompt的生成、优化和管理。对于服务和模型的管理，则统一调用由`main/App.go`提供的公共函数，以确保配置的统一性。

## 界面设计特点

### 紧凑的单栏布局
- 摒弃了原有的三栏式设计，采用从上至下的单栏垂直布局，操作流程更清晰。
- 核心交互区域集成为“想法输入及控制区”和“Prompt展示及操作区”。

### 内联式控件栏
- 将服务选择、模型选择和生成按钮整合到想法输入框下方的同一行控件栏中。
- **服务/模型选择器** 居左，由两个固定宽度的下拉框组成。
- **“生成”按钮** 居右，实现了视觉上的平衡和功能上的聚焦。

### 抽屉式交互
- “优化”、“保存”和“已保存”等非核心功能均通过从右侧滑出的抽屉（Drawer）实现，保持了主界面的整洁。

## 后端功能实现

### PromptPilot.go
后端核心功能已通过`prompt_pilot.go`文件实现，包含以下主要功能：

1. **Prompt处理**：
   - GeneratePrompt: 根据想法和模型生成Prompt
   - GeneratePromptStream: 流式生成Prompt内容（通过Wails事件发送数据块）
   - OptimizePrompt: 根据反馈优化Prompt
   - SavePrompt: 保存Prompt到存储
   - ListPrompts: 获取已保存的Prompt列表

所有后端接口均已实现并绑定到Wails应用中，可直接通过前端调用。
