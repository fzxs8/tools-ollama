# PromptEngineering æ•°æ®ç»“æ„

## 1. Architectureï¼ˆæ¶æ„è®¾è®¡ï¼‰

### 1.1 æ•°æ®æ¶æ„æ¦‚è¿°
PromptEngineering æ¨¡å—é‡‡ç”¨åˆ†å±‚æ•°æ®æ¶æ„ï¼ŒåŒ…å«å‰ç«¯çŠ¶æ€ç®¡ç†ã€åç«¯æ•°æ®æ¨¡å‹ã€æ•°æ®åº“å­˜å‚¨å’Œç¼“å­˜å±‚ï¼Œç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ã€å®Œæ•´æ€§å’Œé«˜æ€§èƒ½è®¿é—®ã€‚

### 1.2 æ•°æ®æµæ¶æ„
```
å‰ç«¯çŠ¶æ€å±‚ (Vue Reactive)
    â†•
API æ¥å£å±‚ (Wails Binding)
    â†•
ä¸šåŠ¡é€»è¾‘å±‚ (Go Service)
    â†•
æ•°æ®è®¿é—®å±‚ (Repository)
    â†•
å­˜å‚¨å±‚ (SQLite + Cache)
```

### 1.3 æ•°æ®å­˜å‚¨ç­–ç•¥
- **æŒä¹…åŒ–å­˜å‚¨**: SQLite æ•°æ®åº“å­˜å‚¨æ ¸å¿ƒæ•°æ®
- **å†…å­˜ç¼“å­˜**: Redis/å†…å­˜ç¼“å­˜çƒ­ç‚¹æ•°æ®
- **ä¼šè¯å­˜å‚¨**: æµè§ˆå™¨ SessionStorage å­˜å‚¨ä¸´æ—¶çŠ¶æ€
- **æœ¬åœ°å­˜å‚¨**: LocalStorage å­˜å‚¨ç”¨æˆ·åå¥½è®¾ç½®

## 2. Analysisï¼ˆéœ€æ±‚åˆ†æï¼‰

### 2.1 æ•°æ®å®ä½“åˆ†æ
| å®ä½“ | ç”¨é€” | å­˜å‚¨æ–¹å¼ | è®¿é—®é¢‘ç‡ |
|------|------|----------|----------|
| Prompt | æç¤ºè¯æ ¸å¿ƒæ•°æ® | SQLite | é«˜ |
| Model | æ¨¡å‹ä¿¡æ¯ | å†…å­˜ç¼“å­˜ | é«˜ |
| Server | æœåŠ¡å™¨é…ç½® | SQLite | ä¸­ |
| Tag | æ ‡ç­¾åˆ†ç±» | SQLite | ä¸­ |
| Session | ä¼šè¯çŠ¶æ€ | å†…å­˜ | é«˜ |

### 2.2 æ•°æ®å…³ç³»åˆ†æ
```
Prompt (1:N) â†’ PromptModel (N:1) â†’ Model
Prompt (1:N) â†’ PromptTag (N:1) â†’ Tag
Server (1:N) â†’ Model
```

### 2.3 æ•°æ®è®¿é—®æ¨¡å¼
- **è¯»å¤šå†™å°‘**: æç¤ºè¯æŸ¥è¯¢é¢‘ç¹ï¼Œåˆ›å»ºç›¸å¯¹è¾ƒå°‘
- **å®æ—¶æ€§è¦æ±‚**: ç”Ÿæˆè¿‡ç¨‹éœ€è¦å®æ—¶çŠ¶æ€æ›´æ–°
- **æ‰¹é‡æ“ä½œ**: æ”¯æŒæ‰¹é‡å¯¼å…¥å¯¼å‡ºæ“ä½œ

## 3. Architectureï¼ˆæ•°æ®æ¶æ„ï¼‰

### 3.1 å‰ç«¯æ•°æ®ç»“æ„

#### 3.1.1 æ ¸å¿ƒçŠ¶æ€æ¥å£
```typescript
// æç¤ºè¯å®ä½“
interface Prompt {
  id: string;                    // å”¯ä¸€æ ‡è¯†ç¬¦
  name: string;                  // æç¤ºè¯åç§°
  content: string;               // æç¤ºè¯å†…å®¹
  description?: string;          // æè¿°ä¿¡æ¯
  tags: string[];                // æ ‡ç­¾åˆ—è¡¨
  models: string[];              // å…³è”æ¨¡å‹åˆ—è¡¨
  serverId: string;              // æœåŠ¡å™¨ID
  version: number;               // ç‰ˆæœ¬å·
  rating?: number;               // è¯„åˆ† (1-5)
  usage: number;                 // ä½¿ç”¨æ¬¡æ•°
  createdAt: number;             // åˆ›å»ºæ—¶é—´æˆ³
  updatedAt: number;             // æ›´æ–°æ—¶é—´æˆ³
  createdBy?: string;            // åˆ›å»ºè€…
}

// æ¨¡å‹ä¿¡æ¯
interface Model {
  name: string;                  // æ¨¡å‹åç§°
  serverId: string;              // æ‰€å±æœåŠ¡å™¨ID
  size?: string;                 // æ¨¡å‹å¤§å°
  family?: string;               // æ¨¡å‹å®¶æ—
  format?: string;               // æ¨¡å‹æ ¼å¼
  parameter_size?: string;       // å‚æ•°è§„æ¨¡
  quantization_level?: string;   // é‡åŒ–çº§åˆ«
  modified_at?: string;          // ä¿®æ”¹æ—¶é—´
}

// æœåŠ¡å™¨é…ç½®
interface Server {
  id: string;                    // æœåŠ¡å™¨ID
  name: string;                  // æœåŠ¡å™¨åç§°
  host: string;                  // ä¸»æœºåœ°å€
  port: number;                  // ç«¯å£å·
  isActive: boolean;             // æ˜¯å¦æ¿€æ´»
  status: 'online' | 'offline' | 'error'; // è¿æ¥çŠ¶æ€
  lastCheck: number;             // æœ€åæ£€æŸ¥æ—¶é—´
}

// æ ‡ç­¾ä¿¡æ¯
interface Tag {
  name: string;                  // æ ‡ç­¾åç§°
  color?: string;                // æ ‡ç­¾é¢œè‰²
  count: number;                 // ä½¿ç”¨æ¬¡æ•°
  description?: string;          // æ ‡ç­¾æè¿°
}
```

#### 3.1.2 åº”ç”¨çŠ¶æ€ç®¡ç†
```typescript
// ä¸»åº”ç”¨çŠ¶æ€
interface AppState {
  // ç”¨æˆ·è¾“å…¥çŠ¶æ€
  userInput: {
    idea: string;                // ç”¨æˆ·æƒ³æ³•è¾“å…¥
    selectedServerId: string;    // é€‰ä¸­çš„æœåŠ¡å™¨ID
    selectedModels: string[];    // é€‰ä¸­çš„æ¨¡å‹åˆ—è¡¨
  };
  
  // ç”ŸæˆçŠ¶æ€
  generation: {
    isGenerating: boolean;       // æ˜¯å¦æ­£åœ¨ç”Ÿæˆ
    generatingModels: Record<string, boolean>; // å„æ¨¡å‹ç”ŸæˆçŠ¶æ€
    renderedPrompts: Record<string, string>;   // å„æ¨¡å‹ç”Ÿæˆç»“æœ
    activeTab: string;           // å½“å‰æ¿€æ´»çš„æ ‡ç­¾é¡µ
    progress: Record<string, number>; // ç”Ÿæˆè¿›åº¦
  };
  
  // æç¤ºè¯ç®¡ç†çŠ¶æ€
  promptManagement: {
    prompts: Prompt[];           // æç¤ºè¯åˆ—è¡¨
    filteredPrompts: Prompt[];   // è¿‡æ»¤åçš„æç¤ºè¯
    selectedPrompts: Prompt[];   // é€‰ä¸­çš„æç¤ºè¯
    searchQuery: string;         // æœç´¢æŸ¥è¯¢
    selectedTags: string[];      // é€‰ä¸­çš„æ ‡ç­¾è¿‡æ»¤
    sortBy: 'name' | 'createdAt' | 'updatedAt' | 'usage'; // æ’åºå­—æ®µ
    sortOrder: 'asc' | 'desc';   // æ’åºæ–¹å‘
    pagination: {
      page: number;              // å½“å‰é¡µç 
      pageSize: number;          // æ¯é¡µå¤§å°
      total: number;             // æ€»æ•°é‡
    };
  };
  
  // UIçŠ¶æ€
  ui: {
    showSaveDrawer: boolean;     // æ˜¾ç¤ºä¿å­˜æŠ½å±‰
    showManagementPanel: boolean; // æ˜¾ç¤ºç®¡ç†é¢æ¿
    showSettings: boolean;       // æ˜¾ç¤ºè®¾ç½®é¢æ¿
    loading: {
      prompts: boolean;          // æç¤ºè¯åŠ è½½çŠ¶æ€
      models: boolean;           // æ¨¡å‹åŠ è½½çŠ¶æ€
      servers: boolean;          // æœåŠ¡å™¨åŠ è½½çŠ¶æ€
    };
    errors: {
      generation: string | null; // ç”Ÿæˆé”™è¯¯ä¿¡æ¯
      network: string | null;    // ç½‘ç»œé”™è¯¯ä¿¡æ¯
      validation: string | null; // éªŒè¯é”™è¯¯ä¿¡æ¯
    };
  };
  
  // ç³»ç»Ÿé…ç½®
  config: {
    servers: Server[];           // æœåŠ¡å™¨åˆ—è¡¨
    models: Model[];             // æ¨¡å‹åˆ—è¡¨
    tags: Tag[];                 // æ ‡ç­¾åˆ—è¡¨
    settings: {
      theme: 'light' | 'dark';   // ä¸»é¢˜æ¨¡å¼
      language: 'zh' | 'en';     // è¯­è¨€è®¾ç½®
      autoSave: boolean;         // è‡ªåŠ¨ä¿å­˜
      maxConcurrent: number;     // æœ€å¤§å¹¶å‘æ•°
    };
  };
}
```

#### 3.1.3 API è¯·æ±‚/å“åº”ç»“æ„
```typescript
// ç”Ÿæˆè¯·æ±‚
interface GenerateRequest {
  idea: string;                  // ç”¨æˆ·æƒ³æ³•
  serverId: string;              // æœåŠ¡å™¨ID
  models: string[];              // æ¨¡å‹åˆ—è¡¨
  options?: {
    temperature?: number;        // æ¸©åº¦å‚æ•°
    max_tokens?: number;         // æœ€å¤§tokenæ•°
    stream?: boolean;            // æ˜¯å¦æµå¼è¾“å‡º
  };
}

// æµå¼å“åº”äº‹ä»¶
interface StreamEvent {
  model: string;                 // æ¨¡å‹åç§°
  chunk: string;                 // æ–‡æœ¬å—
  done: boolean;                 // æ˜¯å¦å®Œæˆ
  timestamp: number;             // æ—¶é—´æˆ³
}

// é”™è¯¯äº‹ä»¶
interface ErrorEvent {
  model: string;                 // æ¨¡å‹åç§°
  error: string;                 // é”™è¯¯ä¿¡æ¯
  code?: string;                 // é”™è¯¯ä»£ç 
  timestamp: number;             // æ—¶é—´æˆ³
}

// API å“åº”åŒ…è£…
interface ApiResponse<T> {
  success: boolean;              // æ˜¯å¦æˆåŠŸ
  data?: T;                      // å“åº”æ•°æ®
  error?: string;                // é”™è¯¯ä¿¡æ¯
  code?: string;                 // é”™è¯¯ä»£ç 
  timestamp: number;             // æ—¶é—´æˆ³
}
```

### 3.2 åç«¯æ•°æ®ç»“æ„

#### 3.2.1 Go æ•°æ®æ¨¡å‹
```go
// æç¤ºè¯æ¨¡å‹
type Prompt struct {
    ID          string    `json:"id" gorm:"primaryKey"`
    Name        string    `json:"name" gorm:"not null"`
    Content     string    `json:"content" gorm:"type:text;not null"`
    Description string    `json:"description" gorm:"type:text"`
    ServerID    string    `json:"serverId" gorm:"not null"`
    Version     int       `json:"version" gorm:"default:1"`
    Rating      *int      `json:"rating" gorm:"check:rating >= 1 AND rating <= 5"`
    Usage       int       `json:"usage" gorm:"default:0"`
    CreatedAt   time.Time `json:"createdAt" gorm:"autoCreateTime"`
    UpdatedAt   time.Time `json:"updatedAt" gorm:"autoUpdateTime"`
    CreatedBy   string    `json:"createdBy"`
    
    // å…³è”å…³ç³»
    Tags   []Tag   `json:"tags" gorm:"many2many:prompt_tags;"`
    Models []Model `json:"models" gorm:"many2many:prompt_models;"`
}

// æ¨¡å‹ä¿¡æ¯
type Model struct {
    Name              string    `json:"name" gorm:"primaryKey"`
    ServerID          string    `json:"serverId" gorm:"primaryKey"`
    Size              string    `json:"size"`
    Family            string    `json:"family"`
    Format            string    `json:"format"`
    ParameterSize     string    `json:"parameter_size"`
    QuantizationLevel string    `json:"quantization_level"`
    ModifiedAt        time.Time `json:"modified_at"`
    
    // å…³è”å…³ç³»
    Server  Server    `json:"server" gorm:"foreignKey:ServerID"`
    Prompts []Prompt  `json:"prompts" gorm:"many2many:prompt_models;"`
}

// æœåŠ¡å™¨é…ç½®
type Server struct {
    ID        string    `json:"id" gorm:"primaryKey"`
    Name      string    `json:"name" gorm:"not null"`
    Host      string    `json:"host" gorm:"not null"`
    Port      int       `json:"port" gorm:"not null"`
    IsActive  bool      `json:"isActive" gorm:"default:true"`
    Status    string    `json:"status" gorm:"default:'offline'"`
    LastCheck time.Time `json:"lastCheck" gorm:"autoUpdateTime"`
    CreatedAt time.Time `json:"createdAt" gorm:"autoCreateTime"`
    UpdatedAt time.Time `json:"updatedAt" gorm:"autoUpdateTime"`
    
    // å…³è”å…³ç³»
    Models  []Model  `json:"models" gorm:"foreignKey:ServerID"`
    Prompts []Prompt `json:"prompts" gorm:"foreignKey:ServerID"`
}

// æ ‡ç­¾æ¨¡å‹
type Tag struct {
    Name        string    `json:"name" gorm:"primaryKey"`
    Color       string    `json:"color"`
    Count       int       `json:"count" gorm:"default:0"`
    Description string    `json:"description"`
    CreatedAt   time.Time `json:"createdAt" gorm:"autoCreateTime"`
    
    // å…³è”å…³ç³»
    Prompts []Prompt `json:"prompts" gorm:"many2many:prompt_tags;"`
}
```

#### 3.2.2 å…³è”è¡¨ç»“æ„
```go
// æç¤ºè¯-æ ‡ç­¾å…³è”è¡¨
type PromptTag struct {
    PromptID string `gorm:"primaryKey"`
    TagName  string `gorm:"primaryKey"`
}

// æç¤ºè¯-æ¨¡å‹å…³è”è¡¨
type PromptModel struct {
    PromptID  string `gorm:"primaryKey"`
    ModelName string `gorm:"primaryKey"`
    ServerID  string `gorm:"primaryKey"`
}
```

### 3.3 æ•°æ®åº“è®¾è®¡

#### 3.3.1 SQLite è¡¨ç»“æ„
```sql
-- æç¤ºè¯è¡¨
CREATE TABLE prompts (
    id TEXT PRIMARY KEY,
    name TEXT NOT NULL,
    content TEXT NOT NULL,
    description TEXT,
    server_id TEXT NOT NULL,
    version INTEGER DEFAULT 1,
    rating INTEGER CHECK (rating >= 1 AND rating <= 5),
    usage INTEGER DEFAULT 0,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    created_by TEXT,
    FOREIGN KEY (server_id) REFERENCES servers(id)
);

-- æœåŠ¡å™¨è¡¨
CREATE TABLE servers (
    id TEXT PRIMARY KEY,
    name TEXT NOT NULL,
    host TEXT NOT NULL,
    port INTEGER NOT NULL,
    is_active BOOLEAN DEFAULT TRUE,
    status TEXT DEFAULT 'offline',
    last_check DATETIME DEFAULT CURRENT_TIMESTAMP,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- æ¨¡å‹è¡¨
CREATE TABLE models (
    name TEXT,
    server_id TEXT,
    size TEXT,
    family TEXT,
    format TEXT,
    parameter_size TEXT,
    quantization_level TEXT,
    modified_at DATETIME,
    PRIMARY KEY (name, server_id),
    FOREIGN KEY (server_id) REFERENCES servers(id)
);

-- æ ‡ç­¾è¡¨
CREATE TABLE tags (
    name TEXT PRIMARY KEY,
    color TEXT,
    count INTEGER DEFAULT 0,
    description TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- æç¤ºè¯-æ ‡ç­¾å…³è”è¡¨
CREATE TABLE prompt_tags (
    prompt_id TEXT,
    tag_name TEXT,
    PRIMARY KEY (prompt_id, tag_name),
    FOREIGN KEY (prompt_id) REFERENCES prompts(id) ON DELETE CASCADE,
    FOREIGN KEY (tag_name) REFERENCES tags(name) ON DELETE CASCADE
);

-- æç¤ºè¯-æ¨¡å‹å…³è”è¡¨
CREATE TABLE prompt_models (
    prompt_id TEXT,
    model_name TEXT,
    server_id TEXT,
    PRIMARY KEY (prompt_id, model_name, server_id),
    FOREIGN KEY (prompt_id) REFERENCES prompts(id) ON DELETE CASCADE,
    FOREIGN KEY (model_name, server_id) REFERENCES models(name, server_id) ON DELETE CASCADE
);
```

#### 3.3.2 ç´¢å¼•è®¾è®¡
```sql
-- æ€§èƒ½ä¼˜åŒ–ç´¢å¼•
CREATE INDEX idx_prompts_created_at ON prompts(created_at DESC);
CREATE INDEX idx_prompts_updated_at ON prompts(updated_at DESC);
CREATE INDEX idx_prompts_usage ON prompts(usage DESC);
CREATE INDEX idx_prompts_rating ON prompts(rating DESC);
CREATE INDEX idx_prompts_server_id ON prompts(server_id);

-- æœç´¢ä¼˜åŒ–ç´¢å¼•
CREATE INDEX idx_prompts_name ON prompts(name);
CREATE INDEX idx_tags_name ON tags(name);

-- å…³è”æŸ¥è¯¢ç´¢å¼•
CREATE INDEX idx_prompt_tags_prompt_id ON prompt_tags(prompt_id);
CREATE INDEX idx_prompt_tags_tag_name ON prompt_tags(tag_name);
CREATE INDEX idx_prompt_models_prompt_id ON prompt_models(prompt_id);
```

## 4. Applicationï¼ˆåº”ç”¨å®ç°ï¼‰

### 4.1 æ•°æ®è®¿é—®å±‚

#### 4.1.1 Repository æ¥å£
```go
// æç¤ºè¯ä»“å‚¨æ¥å£
type PromptRepository interface {
    Create(prompt *Prompt) error
    GetByID(id string) (*Prompt, error)
    List(filter PromptFilter) ([]Prompt, error)
    Update(prompt *Prompt) error
    Delete(id string) error
    Search(query string) ([]Prompt, error)
    GetByTags(tags []string) ([]Prompt, error)
}

// æŸ¥è¯¢è¿‡æ»¤å™¨
type PromptFilter struct {
    ServerID   string   `json:"serverId"`
    Tags       []string `json:"tags"`
    Models     []string `json:"models"`
    SearchText string   `json:"searchText"`
    SortBy     string   `json:"sortBy"`
    SortOrder  string   `json:"sortOrder"`
    Page       int      `json:"page"`
    PageSize   int      `json:"pageSize"`
}
```

#### 4.1.2 ç¼“å­˜ç­–ç•¥
```go
// ç¼“å­˜ç®¡ç†å™¨
type CacheManager struct {
    modelCache  map[string][]Model
    serverCache map[string]Server
    tagCache    []Tag
    mutex       sync.RWMutex
    ttl         time.Duration
}

// ç¼“å­˜é”®å®šä¹‰
const (
    CacheKeyModels  = "models:%s"      // æŒ‰æœåŠ¡å™¨IDç¼“å­˜æ¨¡å‹
    CacheKeyServers = "servers"        // æœåŠ¡å™¨åˆ—è¡¨
    CacheKeyTags    = "tags"           // æ ‡ç­¾åˆ—è¡¨
    CacheKeyPrompts = "prompts:%s"     // æŒ‰æŸ¥è¯¢æ¡ä»¶ç¼“å­˜æç¤ºè¯
)
```

### 4.2 æ•°æ®éªŒè¯

#### 4.2.1 å‰ç«¯éªŒè¯è§„åˆ™
```typescript
// è¡¨å•éªŒè¯è§„åˆ™
const promptValidationRules = {
  name: [
    { required: true, message: 'è¯·è¾“å…¥æç¤ºè¯åç§°', trigger: 'blur' },
    { min: 1, max: 100, message: 'åç§°é•¿åº¦åœ¨ 1 åˆ° 100 ä¸ªå­—ç¬¦', trigger: 'blur' }
  ],
  content: [
    { required: true, message: 'è¯·è¾“å…¥æç¤ºè¯å†…å®¹', trigger: 'blur' },
    { min: 10, max: 10000, message: 'å†…å®¹é•¿åº¦åœ¨ 10 åˆ° 10000 ä¸ªå­—ç¬¦', trigger: 'blur' }
  ],
  tags: [
    { type: 'array', max: 10, message: 'æœ€å¤šé€‰æ‹© 10 ä¸ªæ ‡ç­¾', trigger: 'change' }
  ],
  models: [
    { type: 'array', min: 1, max: 3, message: 'è¯·é€‰æ‹© 1-3 ä¸ªæ¨¡å‹', trigger: 'change' }
  ]
};

// æ•°æ®éªŒè¯å‡½æ•°
const validatePrompt = (prompt: Partial<Prompt>): ValidationResult => {
  const errors: string[] = [];
  
  if (!prompt.name?.trim()) {
    errors.push('æç¤ºè¯åç§°ä¸èƒ½ä¸ºç©º');
  }
  
  if (!prompt.content?.trim()) {
    errors.push('æç¤ºè¯å†…å®¹ä¸èƒ½ä¸ºç©º');
  }
  
  if (prompt.content && prompt.content.length > 10000) {
    errors.push('æç¤ºè¯å†…å®¹è¿‡é•¿');
  }
  
  return {
    valid: errors.length === 0,
    errors
  };
};
```

#### 4.2.2 åç«¯éªŒè¯
```go
// æ•°æ®éªŒè¯å™¨
type PromptValidator struct{}

func (v *PromptValidator) Validate(prompt *Prompt) error {
    if strings.TrimSpace(prompt.Name) == "" {
        return errors.New("æç¤ºè¯åç§°ä¸èƒ½ä¸ºç©º")
    }
    
    if len(prompt.Name) > 100 {
        return errors.New("æç¤ºè¯åç§°è¿‡é•¿")
    }
    
    if strings.TrimSpace(prompt.Content) == "" {
        return errors.New("æç¤ºè¯å†…å®¹ä¸èƒ½ä¸ºç©º")
    }
    
    if len(prompt.Content) > 10000 {
        return errors.New("æç¤ºè¯å†…å®¹è¿‡é•¿")
    }
    
    if prompt.Rating != nil && (*prompt.Rating < 1 || *prompt.Rating > 5) {
        return errors.New("è¯„åˆ†å¿…é¡»åœ¨1-5ä¹‹é—´")
    }
    
    return nil
}
```

### 4.3 æ•°æ®è¿ç§»

#### 4.3.1 ç‰ˆæœ¬ç®¡ç†
```go
// æ•°æ®åº“ç‰ˆæœ¬ç®¡ç†
type Migration struct {
    Version     int
    Description string
    Up          func(*gorm.DB) error
    Down        func(*gorm.DB) error
}

var migrations = []Migration{
    {
        Version:     1,
        Description: "åˆå§‹åŒ–æ•°æ®åº“ç»“æ„",
        Up:          migration001Up,
        Down:        migration001Down,
    },
    {
        Version:     2,
        Description: "æ·»åŠ æç¤ºè¯è¯„åˆ†å­—æ®µ",
        Up:          migration002Up,
        Down:        migration002Down,
    },
}
```

#### 4.3.2 æ•°æ®å¯¼å…¥å¯¼å‡º
```go
// å¯¼å‡ºæ ¼å¼
type ExportData struct {
    Version   string   `json:"version"`
    Timestamp int64    `json:"timestamp"`
    Prompts   []Prompt `json:"prompts"`
    Tags      []Tag    `json:"tags"`
}

// å¯¼å…¥éªŒè¯
func ValidateImportData(data *ExportData) error {
    if data.Version == "" {
        return errors.New("ç¼ºå°‘ç‰ˆæœ¬ä¿¡æ¯")
    }
    
    for _, prompt := range data.Prompts {
        if err := validator.Validate(&prompt); err != nil {
            return fmt.Errorf("æç¤ºè¯ %s éªŒè¯å¤±è´¥: %v", prompt.Name, err)
        }
    }
    
    return nil
}
```

## 5. Assuranceï¼ˆè´¨é‡ä¿è¯ï¼‰

### 5.1 æ•°æ®å®Œæ•´æ€§
- **å¤–é”®çº¦æŸ**: ç¡®ä¿å…³è”æ•°æ®çš„ä¸€è‡´æ€§
- **æ£€æŸ¥çº¦æŸ**: éªŒè¯æ•°æ®å€¼çš„æœ‰æ•ˆæ€§
- **å”¯ä¸€çº¦æŸ**: é˜²æ­¢é‡å¤æ•°æ®
- **éç©ºçº¦æŸ**: ç¡®ä¿å¿…è¦å­—æ®µä¸ä¸ºç©º

### 5.2 æ•°æ®å®‰å…¨æ€§
- **è¾“å…¥éªŒè¯**: å‰åç«¯åŒé‡éªŒè¯
- **SQLæ³¨å…¥é˜²æŠ¤**: ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢
- **æ•°æ®åŠ å¯†**: æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨
- **è®¿é—®æ§åˆ¶**: åŸºäºè§’è‰²çš„æ•°æ®è®¿é—®

### 5.3 æ€§èƒ½ä¼˜åŒ–
- **ç´¢å¼•ä¼˜åŒ–**: é’ˆå¯¹æŸ¥è¯¢æ¨¡å¼è®¾è®¡ç´¢å¼•
- **ç¼“å­˜ç­–ç•¥**: çƒ­ç‚¹æ•°æ®å†…å­˜ç¼“å­˜
- **åˆ†é¡µæŸ¥è¯¢**: å¤§æ•°æ®é›†åˆ†é¡µå¤„ç†
- **è¿æ¥æ± **: æ•°æ®åº“è¿æ¥æ± ç®¡ç†

## 6. Actionï¼ˆè¡ŒåŠ¨è®¡åˆ’ï¼‰

### 6.1 æ•°æ®ç»“æ„å®ç°è®¡åˆ’

#### é˜¶æ®µ1: åŸºç¡€ç»“æ„ (1å‘¨)
- âœ… æ ¸å¿ƒæ•°æ®æ¨¡å‹å®šä¹‰
- âœ… æ•°æ®åº“è¡¨ç»“æ„è®¾è®¡
- âœ… åŸºç¡€CRUDæ“ä½œ
- ğŸ”„ æ•°æ®éªŒè¯è§„åˆ™

#### é˜¶æ®µ2: é«˜çº§åŠŸèƒ½ (1å‘¨)
- ğŸ”„ å…³è”æŸ¥è¯¢ä¼˜åŒ–
- ğŸ”„ ç¼“å­˜æœºåˆ¶å®ç°
- ğŸ”„ æ•°æ®å¯¼å…¥å¯¼å‡º
- ğŸ”„ å…¨æ–‡æœç´¢åŠŸèƒ½

#### é˜¶æ®µ3: æ€§èƒ½ä¼˜åŒ– (1å‘¨)
- ğŸ“… ç´¢å¼•ä¼˜åŒ–
- ğŸ“… æŸ¥è¯¢æ€§èƒ½è°ƒä¼˜
- ğŸ“… å†…å­˜ä½¿ç”¨ä¼˜åŒ–
- ğŸ“… å¹¶å‘å®‰å…¨ä¿è¯

### 6.2 æ•°æ®æ²»ç†
- **æ•°æ®è´¨é‡**: å®šæœŸæ•°æ®è´¨é‡æ£€æŸ¥
- **æ•°æ®å¤‡ä»½**: è‡ªåŠ¨åŒ–å¤‡ä»½ç­–ç•¥
- **æ•°æ®æ¸…ç†**: è¿‡æœŸæ•°æ®æ¸…ç†æœºåˆ¶
- **æ•°æ®ç›‘æ§**: æ•°æ®ä½¿ç”¨æƒ…å†µç›‘æ§