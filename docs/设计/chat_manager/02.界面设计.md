# ChatManager 界面设计

## 1. Architecture（架构设计）

### 1.1 整体布局架构
ChatManager 采用现代化的双栏布局设计，结合渐变背景和毛玻璃效果，提供优雅的用户体验。

```
┌─────────────────────────────────────────────────────────┐
│                    页面头部区域                          │
│  🤖 会话管理 - 与AI模型进行交互式对话                    │
└─────────────────────────────────────────────────────────┘
┌──────────────┬──────────────────────────────────────────┐
│              │                                          │
│   模型选择   │              聊天容器                    │
│   侧边栏     │                                          │
│              │  ┌────────────────────────────────────┐  │
│  🔧 服务器   │  │                                    │  │
│  🤖 模型     │  │          消息历史区域              │  │
│  ⚙️ 参数     │  │                                    │  │
│              │  │  👤 用户消息 (右对齐)              │  │
│              │  │  🤖 助手消息 (左对齐)              │  │
│              │  │                                    │  │
│              │  └────────────────────────────────────┘  │
│              │  ┌────────────────────────────────────┐  │
│              │  │          输入区域                  │  │
│              │  │  [输入框] [发送按钮]               │  │
│              │  └────────────────────────────────────┘  │
└──────────────┴──────────────────────────────────────────┘
```

### 1.2 响应式设计架构
- **桌面端**: 双栏布局，侧边栏固定宽度350px
- **平板端**: 侧边栏可折叠，主要内容区域自适应
- **移动端**: 单栏布局，侧边栏变为抽屉式

## 2. Analysis（设计分析）

### 2.1 视觉设计原则
- **现代化**: 渐变背景、毛玻璃效果、圆角设计
- **一致性**: 统一的色彩体系和交互模式
- **可读性**: 高对比度文字、合适的字体大小
- **可用性**: 直观的操作流程、清晰的状态反馈

### 2.2 色彩体系设计
```css
/* 主色调 - 紫蓝渐变 */
--primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);

/* 背景色系 */
--bg-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
--bg-secondary: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
--bg-glass: rgba(255, 255, 255, 0.95);

/* 文字色系 */
--text-primary: #1a202c;
--text-secondary: #4a5568;
--text-muted: #718096;
--text-inverse: #ffffff;

/* 状态色系 */
--success: #48bb78;
--warning: #ed8936;
--error: #f56565;
--info: #4299e1;
```

## 3. Architecture（组件架构）

### 3.1 页面头部设计

#### 头部布局
```vue
<div class="page-header">
  <div class="header-content">
    <div class="header-icon">🤖</div>
    <div class="header-text">
      <h1>会话管理</h1>
      <p>与AI模型进行交互式对话</p>
    </div>
  </div>
</div>
```

#### 样式特点
- **毛玻璃图标**: 半透明背景，模糊效果
- **渐变文字**: 白色文字配合阴影效果
- **响应式标题**: 移动端自动调整字体大小

### 3.2 模型选择侧边栏

#### 组件结构
```vue
<div class="chat-sidebar">
  <ModelSelector
    v-model:selectedModel="selectedModel"
    v-model:selectedServer="selectedServer"
    v-model:modelParams="modelParams"
    :localModels="localModels"
    :availableServers="availableServers"
  />
</div>
```

#### 功能区域
1. **服务器选择区**
   - 下拉选择器
   - 服务器状态指示
   - 连接状态图标

2. **模型选择区**
   - 模型列表下拉框
   - 模型状态显示
   - 加载模型按钮

3. **参数配置区**
   - 温度滑块 (0.1-2.0)
   - TopP滑块 (0.1-1.0)
   - 上下文大小输入框
   - 输出模式选择

### 3.3 聊天容器设计

#### 容器布局
```vue
<div class="chat-main">
  <ChatContainer>
    <!-- 消息历史区域 -->
    <div class="chat-history">
      <MessageItem v-for="message in messages" />
    </div>
    
    <!-- 输入区域 -->
    <template #input>
      <ChatInput v-model="inputMessage" />
    </template>
  </ChatContainer>
</div>
```

#### 消息样式设计

##### 用户消息样式
```css
.user-message {
  align-self: flex-end;
  max-width: 95%;
}

.user-message .message-content-area {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
  border-radius: 12px;
  padding: 12px 16px;
}
```

##### 助手消息样式
```css
.assistant-message {
  align-self: flex-start;
  max-width: 95%;
}

.assistant-message .message-content-area {
  background-color: #ffffff;
  color: #1a202c;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  border-radius: 12px;
  padding: 12px 16px;
}
```

### 3.4 消息组件设计

#### 消息结构
```vue
<div class="chat-message" :class="messageClass">
  <!-- 头像区域 -->
  <div class="message-avatar">
    <div class="user-avatar" v-if="isUser">👤</div>
    <div class="assistant-avatar" v-else>🤖</div>
  </div>
  
  <!-- 内容区域 -->
  <div class="message-content-area">
    <div class="message-header">
      <span class="sender-name">{{ senderName }}</span>
      <span class="message-time">{{ formatTime }}</span>
    </div>
    <div class="message-content">
      <div class="message-body" v-html="renderedContent"></div>
      <div class="message-actions" v-if="showActions">
        <button @click="copyMessage">复制</button>
        <button @click="regenerate">重新生成</button>
      </div>
    </div>
  </div>
</div>
```

#### Markdown渲染支持
- **代码块**: 深色背景，语法高亮
- **列表**: 缩进和项目符号
- **链接**: 可点击，新窗口打开
- **引用**: 左侧边框，斜体文字

### 3.5 输入组件设计

#### 输入区域布局
```vue
<div class="input-container">
  <div class="input-area">
    <textarea
      v-model="message"
      placeholder="输入您的消息..."
      @keydown="handleKeydown"
      :disabled="isThinking"
    />
    <button
      @click="sendMessage"
      :disabled="!canSend"
      :loading="isThinking"
    >
      发送
    </button>
  </div>
  <div class="input-hint">
    Enter 发送，Shift + Enter 换行
  </div>
</div>
```

#### 交互特性
- **自动调整高度**: 文本框根据内容自动扩展
- **快捷键支持**: Enter发送，Shift+Enter换行
- **状态禁用**: 发送中禁用输入和按钮
- **字符计数**: 显示当前字符数和限制

## 4. Application（应用实现）

### 4.1 对话历史抽屉

#### 抽屉设计
```vue
<el-drawer
  v-model="showHistory"
  title="对话历史"
  direction="rtl"
  size="400px"
>
  <div class="conversation-list">
    <div
      v-for="conv in conversations"
      :key="conv.id"
      class="conversation-item"
      @click="loadConversation(conv)"
    >
      <div class="conversation-title">{{ conv.title }}</div>
      <div class="conversation-time">{{ formatTime(conv.timestamp) }}</div>
      <div class="conversation-actions">
        <button @click.stop="editTitle(conv)">编辑</button>
        <button @click.stop="deleteConversation(conv.id)">删除</button>
      </div>
    </div>
  </div>
</el-drawer>
```

#### 交互优化
- **悬停效果**: 鼠标悬停显示操作按钮
- **活动状态**: 当前对话高亮显示
- **时间格式**: 友好的时间显示格式

### 4.2 系统提示词选择

#### 提示词抽屉
```vue
<PromptListDrawer
  v-model:visible="systemPromptDrawerVisible"
  :prompts="systemPromptList"
  mode="select"
  @select="handleApplySystemPrompt"
/>
```

#### 应用状态显示
- **头部显示**: 聊天界面头部显示当前应用的提示词
- **状态指示**: 图标和文字提示当前状态
- **快速切换**: 点击可快速更换提示词

### 4.3 加载和状态指示

#### 思考指示器
```vue
<div class="thinking-indicator" v-if="isThinking">
  <span>思考中</span>
  <div class="dot"></div>
  <div class="dot"></div>
  <div class="dot"></div>
</div>
```

#### 动画效果
```css
@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
}

.thinking-indicator .dot {
  animation: bounce 1.5s infinite;
  animation-delay: calc(var(--i) * 0.2s);
}
```

## 5. Assurance（质量保证）

### 5.1 可访问性设计
- **键盘导航**: 支持Tab键导航所有交互元素
- **屏幕阅读器**: 语义化HTML和ARIA标签
- **对比度**: 确保文字和背景有足够对比度
- **焦点指示**: 清晰的焦点状态显示

### 5.2 响应式适配
- **断点设计**: 1200px、768px、480px三个主要断点
- **布局调整**: 不同屏幕尺寸的布局优化
- **触摸优化**: 移动端触摸目标大小优化

### 5.3 性能优化
- **虚拟滚动**: 大量消息时的性能优化
- **图片懒加载**: 消息中图片的延迟加载
- **组件缓存**: 合理使用keep-alive缓存

## 6. Action（行动计划）

### 6.1 已完成设计
- ✅ 现代化渐变主题设计
- ✅ 消息样式优化（渐变背景、阴影）
- ✅ 响应式布局适配
- ✅ Markdown渲染支持
- ✅ 交互动画和状态指示

### 6.2 设计优化计划
- 🔄 深色模式支持
- 🔄 自定义主题色彩
- 🔄 消息气泡动画
- 🔄 更丰富的Emoji支持

### 6.3 未来设计方向
- 📅 3D效果和微交互
- 📅 语音消息可视化
- 📅ustomizable界面布局
- 📅 AI头像个性化