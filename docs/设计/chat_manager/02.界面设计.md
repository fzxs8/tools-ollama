# ChatManager界面设计

## 1. 整体布局
采用两栏式布局设计：
- **左侧面板**：模型选择和参数设置区域，固定宽度
- **右侧面板**：主要聊天界面区域，自适应宽度

## 2. 左侧面板设计

### 2.1 模型选择区域
- 服务选择下拉框：选择不同的AI服务提供者
- 模型选择下拉框：选择具体的服务模型
- 加载模型按钮：确认选择并加载模型

### 2.2 参数设置区域
- 温度（temperature）滑块：控制输出的随机性
- Top P滑块：控制核采样
- 上下文（context）数值输入：设置上下文窗口大小
- 预测数（num_predict）数值输入：设置最大预测token数
- Top K数值输入：控制词汇表大小
- 重复惩罚（repeat_penalty）数值输入：控制重复内容惩罚
- 输出方式选择：选择流式输出或阻塞输出

## 3. 右侧面板设计

### 3.1 聊天界面头部
- 对话标题显示：显示当前对话标题
- 新建对话按钮：创建新的对话
- 历史对话按钮：打开历史对话抽屉
- 清空聊天按钮：清空当前聊天记录
- 系统提示词按钮：打开系统提示词设置抽屉

### 3.2 聊天记录区域
- 消息气泡显示：区分用户消息和助手消息
- 头像标识：用户和助手使用不同头像
- 时间戳显示：显示消息发送时间
- Markdown渲染：支持Markdown格式内容渲染
- 消息操作按钮：复制、重新生成等操作

### 3.3 输入区域
- 多行文本输入框：支持多行输入
- 发送按钮：发送消息
- 快捷键支持：Enter发送，Shift+Enter换行

## 4. 抽屉组件设计

### 4.1 系统提示词抽屉
- 从右侧滑出，宽度40%
- 提供系统提示词的增删改查功能
- 支持激活特定提示词

### 4.2 历史对话抽屉
- 从右侧滑出，宽度400px
- 展示历史对话列表
- 支持加载、编辑标题和删除对话

## 5. 响应式设计
- 适配不同屏幕尺寸
- 在小屏幕设备上自动调整布局
- 保证在各种设备上都有良好的用户体验

## 6. 详细界面规范

### 6.1 消息展示规范
- 用户消息右对齐，使用蓝色背景气泡
- 助手消息左对齐，使用白色背景气泡
- 每条消息包含发送者标识和时间戳
- 支持Markdown格式渲染，包括代码块、表格、列表等
- 消息内容支持复制操作

### 6.2 操作按钮规范
- 每条助手消息下方显示操作按钮组
- 包含"复制"和"重新生成"按钮
- 按钮默认隐藏，鼠标悬停消息时显示
- 点击"重新生成"按钮将重新生成该条回复

### 6.3 加载状态规范
- 发送消息时显示"正在思考"动画
- 流式输出时实时更新消息内容
- 阻塞输出时显示加载状态直到完整回复返回

### 6.4 对话管理规范
- 点击"新建对话"按钮清空当前对话内容
- 点击"历史对话"按钮打开对话列表抽屉
- 对话列表按时间倒序排列
- 每个对话项显示标题和时间信息
- 支持对话标题编辑和删除操作

## 7. 用户体验优化

### 7.1 交互反馈
- 所有用户操作提供即时视觉反馈
- 错误情况显示友好的错误提示信息
- 成功操作显示成功提示信息

### 7.2 键盘快捷键
- Enter键发送消息
- Shift+Enter键换行
- 提供快捷键提示信息

### 7.3 滚动行为
- 新消息自动滚动到可视区域
- 用户滚动查看历史消息时暂停自动滚动
- 返回最新消息时恢复自动滚动